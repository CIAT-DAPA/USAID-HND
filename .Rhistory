Sys.setenv(JAVA_HOME='C:/Program Files/Java/jre1.8.0_121')
iDir <- "W:/01_weather_stations/hnd_enee/daily_raw/_primary_files"
stFile <- "El Cajón - Cortés.xlsx"
library(rgdal)
library(proj4)
library(XLConnect)
stcat <- readWorksheet(loadWorkbook(paste0(iDir, "/", stFile)), sheet ="Diaria", header = T)
View(stcat)
library(rPython)
install.packages("rPython")
list.files(iDir)
st <- stLs[1]
stLs <- list.files(iDir)
st <- stLs[1]
st
iconv(st, to='ASCII//TRANSLIT')
iconv(st, to='ASCII//TRANSLIT').replace(" ", "")
a <- iconv(st, to='ASCII//TRANSLIT')
a
a.replace(" ", "")
a <- paste(iconv(st, to='ASCII//TRANSLIT'))
a
a.replace("", " ")
a= "a"
a
gsub("xlsx| ", "", a)
a <- paste(iconv(st, to='ASCII//TRANSLIT'))
gsub("xlsx| ", "", a)
gsub(".xlsx| ", "", a)
stRme <- gsub(".xlsx| ", "", paste(iconv(st, to='ASCII//TRANSLIT')))
stRme
stRme <- tolower(gsub(".xlsx| ", "", paste(iconv(st, to='ASCII//TRANSLIT'))))
stRme
## Carlos Navarro
## CIAT-CCAFS
## February 2017
## USAID-HND
## Needs java x-64 (if R is 64bits) https://www.java.com/en/download/manual.jsp
Sys.setenv(JAVA_HOME='C:/Program Files/Java/jre1.8.0_121')
library(rgdal)
library(proj4)
library(XLConnect)
library(rPython)
###### Convert meters to lat lon using projection for HND
iDir <- "W:/01_weather_stations/hnd_enee/daily_raw/_primary_files"
stFile <- "El Cajón - Cortés.xlsx"
oDir <- "X:/Water_Planning_System/01_weather_stations/hnd_dgrh/monthly_raw/prec-per-station"
stLs <- list.files(iDir)
for (st in stLs){
cat(st, "\n")
st <- stLs[1]
stRme <- tolower(gsub(".xlsx| ", "", paste(iconv(st, to='ASCII//TRANSLIT'))))
stcat <- readWorksheet(loadWorkbook(paste0(iDir, "/", st)), sheet ="Diaria", header = T)
write.csv(stcat, paste0(iDir, "/", stRme, ".txt"), quote = F, row.names = F, sep="\t")
}
write.table(stcat, paste0(iDir, "/", stRme, ".txt"), quote = F, row.names = F, sep="\t")
## Carlos Navarro
## CIAT-CCAFS
## February 2017
## USAID-HND
## Needs java x-64 (if R is 64bits) https://www.java.com/en/download/manual.jsp
Sys.setenv(JAVA_HOME='C:/Program Files/Java/jre1.8.0_121')
library(rgdal)
library(proj4)
library(XLConnect)
library(rPython)
###### Convert meters to lat lon using projection for HND
iDir <- "W:/01_weather_stations/hnd_enee/daily_raw/_primary_files"
stFile <- "El Cajón - Cortés.xlsx"
oDir <- "X:/Water_Planning_System/01_weather_stations/hnd_dgrh/monthly_raw/prec-per-station"
stLs <- list.files(iDir)
for (st in stLs){
cat(st, " reformatting and renaming \n")
stRme <- tolower(gsub(".xlsx| ", "", paste(iconv(st, to='ASCII//TRANSLIT'))))
stcat <- readWorksheet(loadWorkbook(paste0(iDir, "/", st)), sheet ="Diaria", header = T)
write.table(stcat, paste0(iDir, "/", stRme, ".txt"), quote = F, row.names = F, sep="\t")
}
